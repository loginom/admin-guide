# Установка Loginom Adapter

Имя установочного файла состоит из названия и версии продукта: `LoginomAdapter_6.x.x.msi`, где 6.x.x — цифры, обозначающие версию и релиз программы.

При запуске программы установщика *Адаптера* может появится информационное окно с сообщением: `отсутствуют необходимые права… Войдите в систему под именем администратора…`. В этом случае следует запустить установщик из командной строки (**command prompt**), запущенной от имени администратора (ПКМ по ярлыку командной строки, после чего выбрать **Run as Administrator**).

## Установка MSI

Если во время подготовки все было настроено верно, появится окно установщика.

В окне **Выбор адреса для установки** назначаем следующие значения параметров (данные параметры настраиваются в IIS Manager):

![Окно *Выбор адреса для установки*](../../images/adapter-setup-page.png)

* **Веб-узел** — оставляем без изменений Default Web Site (при установке по умолчанию);
* **Виртуальный каталог** — LoginomAdapter;
* **Пул приложений** — выбираем созданный ранее LoginomAdapterAppPool.

При таких параметрах установка *Адаптера* осуществляется в каталог размещения виртуальной папки *LoginomAdapter* веб-узла «Default Web Site». При настройках IIS «по умолчанию» каталогом установки является `C:\inetpub\wwwroot\LoginomAdapter\`.

После инсталляции *Адаптера* в каталоге установки будут размещены:

1. **Service.svc** — для регистрации WSP в качестве веб-сервиса в IIS.
1. **Web.config** — конфигурационный файл веб-сервиса в формате xml, содержащий настройки подключений к внешним веб-сервисам.
1. **wsdl.url** — ссылка на Wsdl сервиса, содержит адрес: `http://localhost/LoginomAdapter/Service.svc?wsdl`.
1. **bin\\** — директория содержащая библиотеки и их настройки:
1. **Configurator\\** — директория содержащая программу настройки *Адаптера* **LoginomAdapterConfigurator.exe**:

## Настройка лицензии Loginom Adapter

Для работы *Адаптера* требуется настройка [ключей лицензирования](../../licenses/README.md).

При использовании сервера сетевых ключей требуется создать и отредактировать файл [GnClient.ini](https://dev.guardant.ru/pages/viewpage.action?pageId=1277980) в каталоге `"C:\ProgramData\BaseGroup\Loginom 6\Adapter"`.

## Перенос приложения Loginom Adapter на другой компьютер

Перенос/копирование развернутого приложения *Адаптера* на другой компьютер можно сделать без использования дистрибутива, перенеся каталог установки ранее развернутого приложения в каталог существующего сайта IIS на другом компьютере. Если используется созданный по умолчанию сайт `DefaultWebSite`, то перенос осуществляется в папку `C:\inetpub\wwwroot`. После этого папка приложения будет отображена в оснастке IIS, в группе `сайты` -> `Default Web Site`, где ее необходимо преобразовать в приложение. Это можно сделать при помощи соответствующего пункта контекстного меню — **Преобразовать в приложение**. В открывшемся окне нужно выбрать заранее созданный пул приложений, например,  `LoginomAdapterAppPool`.

Если веб-сервис не запущен, то необходимо запустить его с помощью контекстного меню в диспетчере служб IIS. После этого wsdl описание веб-сервиса будет доступно по адресу `http://localhost/LoginomAdapter/Service.svc?wsdl`.

> Важно: Перенос приложения *Адаптера* должен осуществляться на компьютер с выполненной [Подготовкой к установке](./README.md).
